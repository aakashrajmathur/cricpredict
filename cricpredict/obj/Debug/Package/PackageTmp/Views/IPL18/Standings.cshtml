@{
    ViewBag.Title = "Standings";
}

<nav class="teal">
    <div class="container">
        <div class="nav-wrapper">
            <ul class="left">
                <li class="active"><a href='@Url.Action("Standings", "IPL18")'>Standings</a></li>
                <li><a href='@Url.Action("Games", "IPL18")'>Upcoming Games</a></li>
                <li><a href='@Url.Action("Teams", "IPL18")'>Teams</a></li>
            </ul>
        </div>
    </div>
</nav>

@{ 
    string inputStandings = (string)ViewData["Standings"];
    string inputResults = (string)ViewData["Results"];
}


@{
    string inputUpcomingGames = (string)ViewData["UpcomingGames"];
    List<string> upcomingGames = new List<string>();
    string[]  tokens = inputUpcomingGames.Split(',');
    foreach (string token in tokens)
    {
        upcomingGames.Add(token);
    }
}

<div class="container">
    <div class="row">
        <div class="col s12 m6">
            <div class="card grey lighten-5 z-depth-2">
                <h5 class="center-align teal-text text" style="padding-top:10px">STANDINGS</h5>
                <table class="centered">
                    <thead>
                        <tr>
                            <th></th> <th>P</th> <th>W</th> <th>L</th> <th>RR</th>
                        </tr>
                    </thead>
                    <tbody id="standingsTableBody">                        
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col s12 m6">
            <div id="predictions">
                <div class="card grey lighten-5 z-depth-2">
                    <h5 class="center-align teal-text" style="padding-top:10px">PREDICTIONS</h5>
                    <table class="centered">
                        <thead>
                            <tr>
                                <th></th>
                                <th>P</th>
                                <th>W</th>
                                <th>L</th>
                                <th>%</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr> <td> <div class="clearfix float-my-children"> <img src="~/Content/IPL/Logos/Chennai Super Kings.png" height="22"> <div>CSK</div> </div> </td><td>14</td><td>10</td><td>4</td><td>>99.9</td></tr>
                            <tr> <td> <div class="clearfix float-my-children"> <img src="~/Content/IPL/Logos/Chennai Super Kings.png" height="22"> <div>CSK</div> </div> </td><td>14</td><td>9</td><td>5</td><td>33.3</td></tr>
                            <tr> <td> <div class="clearfix float-my-children"> <img src="~/Content/IPL/Logos/Chennai Super Kings.png" height="22"> <div>CSK</div> </div> </td><td>14</td><td>9</td><td>5</td><td>33.3</td></tr>
                            <tr> <td> <div class="clearfix float-my-children"> <img src="~/Content/IPL/Logos/Chennai Super Kings.png" height="22"> <div>CSK</div> </div> </td><td>14</td><td>9</td><td>5</td><td>33.3</td></tr>
                            <tr> <td> <div class="clearfix float-my-children"> <img src="~/Content/IPL/Logos/Chennai Super Kings.png" height="22"> <div>CSK</div> </div> </td><td>14</td><td>7</td><td>6</td><td>20.0</td></tr>
                            <tr> <td> <div class="clearfix float-my-children"> <img src="~/Content/IPL/Logos/Chennai Super Kings.png" height="22"> <div>CSK</div> </div> </td><td>14</td><td>7</td><td>7</td><td>17.8</td></tr>
                            <tr> <td> <div class="clearfix float-my-children"> <img src="~/Content/IPL/Logos/Chennai Super Kings.png" height="22"> <div>CSK</div> </div> </td><td>14</td><td>6</td><td>8</td><td>10.2</td></tr>
                            <tr> <td> <div class="clearfix float-my-children"> <img src="~/Content/IPL/Logos/Chennai Super Kings.png" height="22"> <div>CSK</div> </div> </td><td>14</td><td>2</td><td>12</td><td>0</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="col s12 teal-text card grey lighten-5 z-depth-2">
            <h5 class="col s12 center-align teal-text" style="padding-top:10px">FUTURE GAMES</h5>
            <p class="col m9 small left-align hide-on-small-and-down">Click/touch to select winner</p>
            <p class="col s7 hide-on-med-and-up"></p>
            <p class="col s5 m3">
                <label style="padding-right:20px">
                    <input name="group1" type="radio" class="with-gap" id="radioButtonViewByDate" checked onchange="ViewByChanged(id)" />
                    <span>Date</span>
                </label>
                <label>
                    <input name="group1" type="radio" class="with-gap" id="radioButtonViewByTeam" onchange="ViewByChanged(id)" />
                    <span>Team</span>
                </label>
            </p>

            <i class="col s3 m2 center-align red medium material-icons" onclick="PrevWeekClicked()">chevron_left</i>
            <div class="col s6 center-align teal-text yellow hide-on-med-and-up"><p>Apr 16 - Apr 23</p></div>
            <div class="col m8 center-align teal-text yellow hide-on-small-and-down"><p>Week 1 (Apr 16 - Apr 23)</p></div>
            <i class="medium material-icons col s3 m2 center-align red" onclick="NextWeekClicked()">chevron_right</i>

            <div id="games">
            </div>
        </div>

        <div class="col s12 teal-text card grey lighten-5 z-depth-2">
            <p class="center-align teal-text" style="padding-top:10px">RESULTS</p>
            <div>
                <div id="results">

                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    
    var currentWeekIndex = [1];     //can be 1 to 6.
    var viewPrefence = ["date"];    //can be "date" or "team"

    var standingsJS = [];
    var gamesJS = []

    function PrevWeekClicked() {
        alert("Prev week clicked");
    }

    function NextWeekClicked() {
        alert("Next week clicked");
    }

    function ViewByChanged(id) {
        alert(id);
    }

    function GetStandingsContent() {
        var content = "";
        for (i = 0; i < 8; i++) {
            content += "<tr> <td> <div class=\"clearfix float-my-children\"> ";
            content += "<img src=\"/Content/IPL/Logos/Chennai Super Kings.png\" height=\"22\"> ";
            content += "<div>CSK</div> </div> </td><td>2</td><td>2</td><td>4</td><td>23</td></tr>";
        }
        return content;
    }

    function GetGamesContent() {
        var content = "";

        return content;
    }

    function UpdateUI() {
        alert("From update UI");
        document.getElementById("games").innerHTML = GetGamesContent();
    }

    window.onload = function () {
        //Display standings:
        document.getElementById("standingsTableBody").innerHTML = GetStandingsContent();


        @{ string gamesAsString = string.Join(",", upcomingGames.ToArray());}
        var gamesJSTemp = '@gamesAsString';
        var gamesJS = gamesJSTemp.split(",");

        //alert(gamesJS.length);

        //Reset the check boxes to as original.
        var content = "<div class=\"row\">";

        for (i = 0; i < 5; i++) {
            content += "<div class=\"col s12 m6 l4\">"
            content += "<div class=\"card teal lighten-5 z-depth-2\" >";
            content += "<div class=\"card-content black-text\" >";
            //if (winnersJS[i] == gamesJS[i * 4 + 1]) {
              //  content += "<label> <input type = \"checkbox\" id= \"game," + i + ",team,1\" onclick=\"ChangeSelection(id)\" checked=\"checked\" \>";
            //}
            //else {
                content += "<label> <input type = \"checkbox\" id= \"game," + i + ",team,1\" onclick=\"ChangeSelection(id)\" \>";
            //}

            var teamNameWithoutQuotes = gamesJS[i * 4 + 1].substring(6, gamesJS[i * 4 + 1].length - 6);
            content += "<span class=\"black-text\">" + teamNameWithoutQuotes + " </span> </label> <br />";

            teamNameWithoutQuotes = gamesJS[i * 4 + 2].substring(6, gamesJS[i * 4 + 2].length - 6);
            //content += "</p>" + teamNameWithoutQuotes + "<p>";

           // content += "<label class=\"red\"> <input type = \"checkbox\" id= \"game," + i + ",team,2\" onclick=\"ChangeSelection(id)\" \>";
            //teamNameWithoutQuotes = gamesJS[i * 4 + 2].substring(6, gamesJS[i * 4 + 2].length - 6);
            //content += "<span class=\"black-text\"></span> </label> <br />";

            content += "<span class=\"left\" style=\" padding-top:5px\">" + teamNameWithoutQuotes + "</span>";
            content += "<span class=\"right\" style=\" padding-top:5px\">  <label> <input type= \"checkbox\" id= \"game," + i + ",team,1\" onclick=\"ChangeSelection(id)\" \>  </span><br />";

            var when = gamesJS[i * 4].substring(6, gamesJS[i * 4].length - 6);
            content += "<span class=\"left\" style=\"font-size:9px; padding-top:5px\">" + when + "</span>";
            var where = gamesJS[i * 4 + 3].substring(6, gamesJS[i * 4 + 3].length - 6);
            content += "<span class=\"right\" style=\"font-size:9px; padding-top:5px; padding-right:25px\">" + where + "</span> <br />";

            content += "</div>";
            content += "</div>";
            content += "</div>";
        }
        content += "</div>";
        document.getElementById('games').innerHTML = content;



        content = "<div class=\"row\">";

        for (i = 0; i < 34; i++) {
            content += "<div class=\"col s12 m6 l4\">"
            content += "<div class=\"card teal lighten-5 z-depth-2\" >";
            content += "<div class=\"card-content black-text\" >";

            //content += "<label>";
            var teamNameWithoutQuotes = gamesJS[i * 4 + 1].substring(6, gamesJS[i * 4 + 1].length - 6);
            content += "<span class = \" col s10 red\">" + teamNameWithoutQuotes + "</span>";
            content += "<span class = \" col s2 yellow\"><label><input type = \"checkbox\" id= \"game," + i + ",team,1\" onclick=\"ChangeSelection(id)\" checked=\"checked\" \></label></span>";

            //content += "<span class=\"black-text\">" + teamNameWithoutQuotes + " </span> ";
            //content += "<input type = \"checkbox\" id= \"game," + i + ",team,1\" onclick=\"ChangeSelection(id)\" checked=\"checked\" \></label> <br />";

            teamNameWithoutQuotes = gamesJS[i * 4 + 2].substring(6, gamesJS[i * 4 + 2].length - 6);

            content += "<span class = \" col s10 red\">" + teamNameWithoutQuotes + "</span>";
            content += "<span lass = \" col s2 yellow\"> <input type = \"checkbox\" id= \"game," + i + ",team,1\" onclick=\"ChangeSelection(id)\" checked=\"checked\" \> </span> <br />";
            //content += "<span class=\"black-text\">" + teamNameWithoutQuotes + "</span> </label> <br />";
            //content += "<input type = \"checkbox\" id= \"game," + i + ",team,1\" onclick=\"ChangeSelection(id)\" checked=\"checked\" \></label> <br />";

            content += "<div class = \" col s12\">";
            var when = gamesJS[i * 4].substring(6, gamesJS[i * 4].length - 6);
            content += "<span class=\"left\" style=\"font-size:9px; padding-top:5px\">" + when + "</span>";
            var where = gamesJS[i * 4 + 3].substring(6, gamesJS[i * 4 + 3].length - 6);
            content += "<span class=\"right\" style=\"font-size:9px; padding-top:5px; padding-right:25px\">" + where + "</span> <br />";

            content += "</div>";
            content += "</div>";
            content += "</div>";
            content += "</div>";
        }
        content += "</div>";
        document.getElementById('results').innerHTML = content;
    }
</script>



<style type="text/css">
    td {
        padding: 5px;
        margin: 0px;
    }

    th {
        padding: 5px;
        margin: 0px;
    }

    /* tell the container's children to float left: */
    .float-my-children > * {
        float: left;
        margin-right: 5px;
    }

    /* this is called a clearfix. it makes sure that the container's children floats are cleared, without using extra markup */

    .clearfix {
        *zoom: 1 /* for IE */
    }

    .clearfix:before,
    .clearfix:after {
        content: " ";
        display: table;
    }

    .clearfix:after {
        clear: both;
    }

    .card-panel {
        padding: 5px;
    }

    .table {
        margin: 0px;
    }
</style>
