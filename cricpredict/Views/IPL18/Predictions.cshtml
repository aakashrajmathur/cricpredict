
@{
    ViewBag.Title = "Predictions";
}

<nav class="teal">
    <div class="container">
        <div class="nav-wrapper">
            <ul class="left">
                <li class="active"><a href='@Url.Action("Predictions", "IPL18")'>Predictions</a></li>
                <li><a href='@Url.Action("Teams", "IPL18")'>Teams</a></li>
            </ul>
        </div>
    </div>
</nav>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- cricpredict -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2176788893488829"
     data-ad-slot="5404357502"
     data-ad-format="auto"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
@{
    //Input from controller
    string inputResults = (string)ViewData["Results"];
    string inputStandings = (string)ViewData["Standings"];
    string inputWeek = (string)ViewData["Defaults"];
}

<div class="container">
    <div class="row">
        <div class="col s12 m6">
            <div class="card grey lighten-5 z-depth-5">
                <h5 class="center-align teal-text text" style="padding-top:10px">STANDINGS</h5>
                <table class="centered">
                    <thead>
                        <tr>
                            <th></th> <th>P</th> <th>W</th> <th>L</th> <th>Pts</th> <th>NRR</th> <th>%</th>
                        </tr>
                    </thead>
                    <tbody id="standingsTableBody"></tbody>
                </table>
            </div>
        </div>
        <div class="col s12 m6">
            <div id="predictions">
                <div class="card grey lighten-5 z-depth-5">
                    <h5 class="center-align teal-text" style="padding-top:10px">PREDICTIONS</h5>
                    <table class="centered">
                        <thead>
                            <tr>
                                <th></th> <th>P</th> <th>W</th> <th>L</th> <th>%</th>
                            </tr>
                        </thead>
                        <tbody id="predictionsTableBody">
                            
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col s12 teal-text card grey lighten-5 z-depth-2">
            <a class="col s2 center-align" href="#"> <i class="center-align medium material-icons blue-grey-text" onclick="PrevClicked()">chevron_left</i></a>
            <div class="col s8 center-align hide-on-med-and-up"><h5 id="TitleSmall">Apr 16 - Apr 23</h5></div>
            <div class="col m8 center-align hide-on-small-and-down"><h5 id="TitleFull">Week 1 (Apr 16 - Apr 23)</h5></div>
            <a href="#" class="col s2 center-align"> <i class="medium material-icons center-align blue-grey-text" onclick="NextClicked()">chevron_right</i></a>

            <p class="col s6 m8 l8 small left-align grey-text"></p>
            <p class="col s6 m4 l4">
                <label style="padding-right:20px">
                    <input name="group1" type="radio" class="with-gap" id="radioButtonViewByDate" checked onchange="ViewByChanged(id)" />
                    <span>Date</span>
                </label>
                <label>
                    <input name="group1" type="radio" class="with-gap" id="radioButtonViewByTeam" onchange="ViewByChanged(id)" />
                    <span>Team</span>
                </label>
            </p>

            <h5 class="col s12 center-align teal-text" style="padding-top:10px">FUTURE GAMES</h5>
            <div id="games">
                 
            </div>
            <h5 class="col s12 center-align teal-text" style="padding-top:10px">RESULTS</h5>
            <div id="results">
                Results
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    var currentWeek = [0];
    var currentTeamIndex = [0];
    var viewType = ["Date"];    //Date/Team

    var origStandingsJS = [];   //ShortTeamName, LongTeamName, P, W, L, T, Pts, NRR
    var predictStandingJS = []; //ShortTeamName, LongTeamName, P, W, L, T, Pts, %
    var gameInfoJS = [];        //homeTeamLongName, AwayTeamLongName, where, when, week, completed, winnerLongTeamName, winnerNotes, homeScore, awayScore
    
    var teamFullNames = ["CHENNAI SUPER KINGS", "DELHI DAREDEVILS", "MUMBAI INDIANS", "KINGS XI PUNJAB", "KOLKATA KNIGHT RIDERS", "ROYAL CHALLENGERS BANGALORE", "RAJASTHAN ROYALS", "SUNRISERS HYDERABAD"];
    var teamShortNames = ["CSK", "DD", "MI", "KXIP", "KKR", "RCB", "RR", "SRH"];
    var weekShortTitle = ["Apr 7 - Apr 15","Apr 16 - Apr 22","Apr 23 - Apr 29","Apr 30 - May 6","May 7 - May 13","May 14 - May 20"];
    var weekFullTitle = ["WEEK 1 (Apr 7 - Apr 15)","WEEK 2 (Apr 16 - Apr 22)","WEEK 3 (Apr 23 - Apr 29)","WEEK 4 (Apr 30 - May 6)","WEEK 5 (May 7 - May 13)","WEEK 6 (May 14 - May 20)"];

    window.onload = function () {
        currentWeek[0] = '@inputWeek';
        document.getElementById('radioButtonViewByDate').checked = true;

        var standingsTokens = '@inputStandings'.split(',');
        for (i = 0; i < standingsTokens.length; i = i + 8) {
            origStandingsJS.push({ "LongTeamName": standingsTokens[i], "ShortTeamName": standingsTokens[i + 1], "P": standingsTokens[i + 2], "W": standingsTokens[i + 3], "L": standingsTokens[i + 4], "T": standingsTokens[i + 5], "Pts": standingsTokens[i + 6], "NRR": standingsTokens[i + 7], "PlayoffPerc":50.0 });
            predictStandingJS.push({ "LongTeamName": standingsTokens[i], "ShortTeamName": standingsTokens[i + 1], "P": 0, "W": 0, "L": 0, "T": 0, "Pts": 0,"NRR": standingsTokens[i + 7], "PlayoffPerc": 50.0 });
        }
        var resultsTokens = '@inputResults'.split('|');
        var gameCounter = 1;
        for (i = 0; i < resultsTokens.length; i = i + 10) {
            gameInfoJS.push({ "GameNo":gameCounter, "HomeTeamName": resultsTokens[i], "AwayTeamName": resultsTokens[i + 1], "Where": resultsTokens[i + 2], "When": resultsTokens[i + 3], "Week": resultsTokens[i + 4], "Completed": resultsTokens[i + 5], "WinnerTeamName": resultsTokens[i + 6], "WinnerScore": resultsTokens[i + 7], "HomeScore": resultsTokens[i + 8], "AwayScore": resultsTokens[i + 9] });
            gameCounter++;
        }

        for (i = 0; i < gameInfoJS.length; i++) {
            var homeTeamObj = FindObjectByKey(predictStandingJS, "LongTeamName", gameInfoJS[i].HomeTeamName);
            homeTeamObj.P++;
            var awayTeamObj = FindObjectByKey(predictStandingJS, "LongTeamName", gameInfoJS[i].AwayTeamName);
            awayTeamObj.P++;
            //alert("Comparing " + gameInfoJS[i].HomeTeamName +" to " + gameInfoJS[i].WinnerTeamName)
            if (gameInfoJS[i].HomeTeamName == gameInfoJS[i].WinnerTeamName) {
                homeTeamObj.W++;
                homeTeamObj.Pts += 2;
                awayTeamObj.L++;
            } else {
                awayTeamObj.W++;
                awayTeamObj.Pts += 2;
                homeTeamObj.L++;
            }
        }
        document.getElementById("standingsTableBody").innerHTML = GetStandingsTableBody();

        //Sort the predictStandingJS on pts, w, current RR
        SortStandings(predictStandingJS);
        document.getElementById("predictionsTableBody").innerHTML = GetPredictionsTableBody();

        UpdateGamesAndResults();
    }

    function PrevClicked() {
        if (viewType[0] == "Date") {
            if (currentWeek[0] != 1)
                currentWeek[0]--;
            //alert("Hello from prev week clicked. CurrentWeek = " + currentWeek[0]);
        }
        else if (viewType[0] == "Team") {
            currentTeamIndex[0]--;
            if (currentTeamIndex[0] == -1)
                currentTeamIndex[0] = 7;
        }
        UpdateGamesAndResults();
    }

    function NextClicked() {
        if (viewType[0] == "Date") {
            if (currentWeek[0] != 6)
                currentWeek[0]++;
            //alert("Hello from prev week clicked. CurrentWeek = " + currentWeek[0]);
        }
        else if (viewType[0] == "Team") {
            currentTeamIndex[0]++;
            if (currentTeamIndex[0] == 8)
                currentTeamIndex[0] = 0;
        }
        UpdateGamesAndResults();
    }

    function ViewByChanged(id) {
        if (id == "radioButtonViewByDate") {
            viewType[0] = "Date";
        } else if (id == "radioButtonViewByTeam") {
            viewType[0] = "Team";
        }
        UpdateGamesAndResults();
    }

    function GetBackgroundColor(team) {
        
        if (team.toUpperCase() == "CHENNAI SUPER KINGS")
            return "yellow"; //verified
        else if (team.toUpperCase() == "DELHI DAREDEVILS")
            return "red lighten-4"; //verified
        else if (team.toUpperCase() == "MUMBAI INDIANS")
            return "light blue lighten-4"; //verified
        else if (team.toUpperCase() == "KINGS XI PUNJAB")
            return "red lighten-3";
        else if (team.toUpperCase() == "KOLKATA KNIGHT RIDERS")
            return "deep purple lighten-4";
        else if (team.toUpperCase() == "ROYAL CHALLENGERS BANGALORE")
            return "red accent-1"; //verified
        else if (team.toUpperCase() == "RAJASTHAN ROYALS")
            return "indigo lighten-4"; //verified
        else if (team.toUpperCase() == "SUNRISERS HYDERABAD")
            return "deep orange"; //correct
    }

    function ChangeSelection(id) {

        //3 things need to happen:
        //1. Update check boxes (done)
        //2. Update standings
        //3. Update Projected standings based on new winners

        //1. Update check boxes:
        var tokens = id.split('_');

        //determine if the id was checked or unchecked:
        var checked = false;
        if (document.getElementById(id).checked)
            checked = true;

        var corrId = "";
        if (tokens.length > 2) {
            if (tokens[2] == "Home") 
                corrId = tokens[0] + '_' + tokens[1] + '_' + "Away";            
            else
                corrId = tokens[0] + '_' + tokens[1] + '_' + "Home";
        }    
        document.getElementById(corrId).checked = !document.getElementById(id).checked;
        
        var homeTeamLongName = gameInfoJS[tokens[1] * 1 - 1].HomeTeamName;
        var awayTeamLongName = gameInfoJS[tokens[1] * 1 - 1].AwayTeamName;
        
        var winner = "";
        var loser = "";
        if (document.getElementById(id).checked == true) {
            if (id.includes("Home")) {
                winner = homeTeamLongName;
                loser = awayTeamLongName;
            } else {
                winner = awayTeamLongName;
                loser = homeTeamLongName;
            }            
        }
        else {
            if (id.includes("Home")) {
                winner = awayTeamLongName;
                loser = homeTeamLongName;
            } else {
                winner = homeTeamLongName;
                loser = awayTeamLongName;
            }
        }
        
        alert("Win = " + winner + ", lose = " + loser);
        //update winner in gameInfo.
        gameInfoJS[tokens[1] * 1 - 1].WinnerTeamName = winner;
        
        //
        var winnerObj = FindObjectByKey(predictStandingJS, "LongTeamName", winner);
        winnerObj.W++;
        winnerObj.L--;
        winnerObj.Pts += 2;
        var loserObj = FindObjectByKey(predictStandingJS, "LongTeamName", loser);
        loserObj.W--;
        loserObj.L++;
        loserObj.Pts -= 2;

        //Sort and Redraw standings
        SortStandings(predictStandingJS);
        document.getElementById("predictionsTableBody").innerHTML = GetPredictionsTableBody();
    }

    function GetGamesContent() {
        var content = "";
        content += "    <div class=\"container\">";
        content += "    <hr style=\"float:left; width:100%\" class=\"left\" />";
        
        if (viewType[0] == "Date") {
            //content += currentWeek[0];
            for (i = 0; i < gameInfoJS.length; i++) {
                if (gameInfoJS[i].Week == currentWeek[0]) {
                    if (gameInfoJS[i].Completed == "true") {

                        //content += "    <p style=\"float:left; width:100%\" class=\"center-align teal-text\">Game " + gameInfoJS[i].GameNo + "</p>";
                        //if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].HomeTeamName) {
                            content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 " + GetBackgroundColor(gameInfoJS[i].HomeTeamName) + "\">";
                        //}
                        //else {
                        //    content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 teal lighten-5\">";
                        //}
                        content += "        <div class=\"row\">";
                        content += "            <div class=\"col m4 hide-on-small-only center-align\">";
                        content += "                <img src=\"/Content/IPL/Logos/" + gameInfoJS[i].HomeTeamName + ".png\" height=\"50\" >";
                        content += "            </div>";
                        content += "            <div class=\"col s6 right-align blue-grey-text\" style=\"font-weight: bold\">" + GetShortTeamName( gameInfoJS[i].HomeTeamName) + "</div>";
                        content += "            <div class=\"col s4 m2\" style=\"padding-top:8px\">";
                        content += "                <label>";

                        if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].HomeTeamName) {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Home\" checked=\"checked\" onclick=\"ChangeSelection(id)\" />";
                        }
                        else {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Home\" onclick=\"ChangeSelection(id)\" />";
                        }
                        content += "                    <span></span>";
                        content += "                </label>";
                        content += "            </div>                            ";
                        content += "        </div>";
                        content += "    </a>";

                        content += "    <div style=\"float:left;width:8%;\"><h6 class=\"center-align blue-grey-text\" style=\"padding-top:18px\">VS</h6></div>";

                        //if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].AwayTeamName) {
                            content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 " + GetBackgroundColor(gameInfoJS[i].AwayTeamName)+" \">";
                        //} else {
                        //    content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 teal lighten-5\">";
                        //}
                        content += "        <div class=\"row\">";
                        content += "            <div class=\"col s4 m2\" style=\"padding-top:8px\">";
                        content += "                <label>";
                        if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].AwayTeamName) {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Away\" checked=\"checked\" onclick=\"ChangeSelection(id)\" />";
                        }
                        else {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Away\" onclick=\"ChangeSelection(id)\" />";
                        }
                        content += "                    <span></span>";
                        content += "                </label>";
                        content += "            </div>";
                        content += "            <div class=\"col s6 left-align blue-grey-text\" style=\"font-weight: bold\" >" + GetShortTeamName(gameInfoJS[i].AwayTeamName) + "</div>";
                        content += "            <div class=\"col m4 hide-on-small-only center-align\">";
                        content += "                <img src=\"/Content/IPL/Logos/" + gameInfoJS[i].AwayTeamName + ".png\" height=\"50\">";
                        content += "            </div>";
                        content += "        </div>";
                        content += "    </a>";

                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0; padding-top:10px\" class=\"right-align teal-text\" >" + gameInfoJS[i].When + "</p>";
                        content += "    <p style=\"float:left; width:5%; margin: 0; padding: 0; padding-top:10px\" class=\"right-align white-text\">.</p>";
                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0; padding-top:10px\" class=\"left-align teal-text\" >" + gameInfoJS[i].Where + "</p>";

                        content += "    <hr style=\"float:left; width:100%\" class=\"left\" />";                        
                    }
                }
            }            
        }
        else if (viewType[0] == "Team") {

            for (i = 0; i < gameInfoJS.length; i++) {
                if ((gameInfoJS[i].HomeTeamName.toUpperCase() == teamFullNames[currentTeamIndex[0]]) || (gameInfoJS[i].AwayTeamName.toUpperCase() == teamFullNames[currentTeamIndex[0]])) {
                    if (gameInfoJS[i].Completed == "true") {
                        //content += "    <p style=\"float:left; width:100%\" class=\"center-align teal-text\">Game " + gameInfoJS[i].GameNo + "</p>";
                       // if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].HomeTeamName) {
                            content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 " + GetBackgroundColor(gameInfoJS[i].HomeTeamName) + "\">";
                        //}
                        //else {
                        //    content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 teal lighten-5\">";
                        //}
                        content += "        <div class=\"row\">";
                        content += "            <div class=\"col m4 hide-on-small-only center-align\">";
                        content += "                <img src=\"/Content/IPL/Logos/" + gameInfoJS[i].HomeTeamName + ".png\" height=\"50\" >";
                        content += "            </div>";
                        content += "            <div class=\"col s6 right-align blue-grey-text\" style=\"font-weight: bold\" >" + GetShortTeamName(gameInfoJS[i].HomeTeamName) + "</div>";
                        content += "            <div class=\"col s4 m2\" style=\"padding-top:8px\">";
                        content += "                <label>";

                        if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].HomeTeamName) {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Home\" checked=\"checked\" onclick=\"ChangeSelection(id)\" />";
                        }
                        else {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Home\" onclick=\"ChangeSelection(id)\" />";
                        }
                        content += "                    <span></span>";
                        content += "                </label>";
                        content += "            </div>                            ";
                        content += "        </div>";
                        content += "    </a>";

                        content += "    <div style=\"float:left;width:8%;\"><h6 class=\"center-align blue-grey-text\" style=\"padding-top:18px\">VS</h6></div>";

                        //if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].AwayTeamName) {
                            content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 " + GetBackgroundColor(gameInfoJS[i].AwayTeamName) + " \">";
                        //} else {
                        //    content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 teal lighten-5\">";
                       // }
                        content += "        <div class=\"row\">";
                        content += "            <div class=\"col s4 m2\" style=\"padding-top:8px\">";
                        content += "                <label>";
                        if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].AwayTeamName) {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Away\" checked=\"checked\" onclick=\"ChangeSelection(id)\" />";
                        }
                        else {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Away\" onclick=\"ChangeSelection(id)\" />";
                        }
                        content += "                    <span></span>";
                        content += "                </label>";
                        content += "            </div>";
                        content += "            <div class=\"col s6 left-align blue-grey-text\" style=\"font-weight: bold\" >" + GetShortTeamName(gameInfoJS[i].AwayTeamName) + "</div>";
                        content += "            <div class=\"col m4 hide-on-small-only center-align\">";
                        content += "                <img src=\"/Content/IPL/Logos/" + gameInfoJS[i].AwayTeamName + ".png\" height=\"50\">";
                        content += "            </div>";
                        content += "        </div>";
                        content += "    </a>";

                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0; padding-top:10px\" class=\"right-align teal-text\" >" + gameInfoJS[i].When + "</p>";
                        content += "    <p style=\"float:left; width:5%; margin: 0; padding: 0; padding-top:10px\" class=\"right-align white-text\">.</p>";
                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0; padding-top:10px\" class=\"left-align teal-text\" >" + gameInfoJS[i].Where + "</p>";

                        content += "    <hr style=\"float:left; width:100%\" class=\"left\" />";
                    }
                }
            }
        }
        return content;
    }

    function GetResultsContent() {
        var content = "";
        content += "    <div class=\"container\">";
        content += "    <hr style=\"float:left; width:100%\" class=\"left\" />";

        if (viewType[0] == "Date") {
            //content += currentWeek[0];
            for (i = 0; i < gameInfoJS.length; i++) {
                if (gameInfoJS[i].Week == currentWeek[0]) {
                    if (gameInfoJS[i].Completed == "false") {
                       // content += "    <p style=\"float:left; width:100%\" class=\"center-align teal-text\">Game " + gameInfoJS[i].GameNo + "</p>";
                        //if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].HomeTeamName) {
                        content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 disabled " + GetBackgroundColor(gameInfoJS[i].HomeTeamName) + "\">";
                        //}
                        //else {
                        //    content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 teal lighten-5\">";
                        //}
                        content += "        <div class=\"row\">";
                        content += "            <div class=\"col m4 hide-on-small-only center-align\">";
                        content += "                <img src=\"/Content/IPL/Logos/" + gameInfoJS[i].HomeTeamName + ".png\" height=\"50\" >";
                        content += "            </div>";
                        content += "            <div class=\"col s6 right-align blue-grey-text\" style=\"font-weight: bold\">" + GetShortTeamName(gameInfoJS[i].HomeTeamName) + "</div>";
                        content += "            <div class=\"col s4 m2\" style=\"padding-top:8px\">";
                        content += "                <label>";

                        if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].HomeTeamName) {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Home\" checked=\"checked\" onclick=\"ChangeSelection(id)\" />";
                        }
                        else {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Home\" onclick=\"ChangeSelection(id)\" />";
                        }
                        content += "                    <span></span>";
                        content += "                </label>";
                        content += "            </div>                            ";
                        content += "        </div>";
                        content += "    </a>";

                        content += "    <div style=\"float:left;width:8%;\"><h6 class=\"center-align blue-grey-text\" style=\"padding-top:18px\">VS</h6></div>";

                        //if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].AwayTeamName) {
                        content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 disabled " + GetBackgroundColor(gameInfoJS[i].AwayTeamName) + " \">";
                        //} else {
                        //    content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 teal lighten-5\">";
                        //}
                        content += "        <div class=\"row\">";
                        content += "            <div class=\"col s4 m2\" style=\"padding-top:8px\">";
                        content += "                <label>";
                        if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].AwayTeamName) {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Away\" checked=\"checked\" onclick=\"ChangeSelection(id)\" />";
                        }
                        else {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Away\" onclick=\"ChangeSelection(id)\" />";
                        }
                        content += "                    <span></span>";
                        content += "                </label>";
                        content += "            </div>";
                        content += "            <div class=\"col s6 left-align blue-grey-text\" style=\"font-weight: bold\" >" + GetShortTeamName(gameInfoJS[i].AwayTeamName) + "</div>";
                        content += "            <div class=\"col m4 hide-on-small-only center-align\">";
                        content += "                <img src=\"/Content/IPL/Logos/" + gameInfoJS[i].AwayTeamName + ".png\" height=\"50\">";
                        content += "            </div>";
                        content += "        </div>";
                        content += "    </a>";
                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0\" class=\"right-align teal-text\" >" + gameInfoJS[i].When + "</p>";
                        content += "    <p style=\"float:left; width:5%; margin: 0; padding: 0\" class=\"right-align white-text\">.</p>";
                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0\" class=\"left-align teal-text\" >" + gameInfoJS[i].Where + "</p>";

                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0\" class=\"right-align teal-text\">" + gameInfoJS[i].HomeScore + "</p>";
                        content += "    <p style=\"float:left; width:5%; margin: 0; padding: 0\" class=\"right-align white-text\">.</p>";
                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0\" class=\"left-align teal-text\">" + gameInfoJS[i].AwayScore + "</p>";

                        content += "    <hr style=\"float:left; width:100%\" class=\"left\" />";                        
                    }
                }
            }
        }
        else if (viewType[0] == "Team") {
            //content += teamFullNames[currentTeamIndex[0]];
            for (i = 0; i < gameInfoJS.length; i++) {
                if ((gameInfoJS[i].HomeTeamName.toUpperCase() == teamFullNames[currentTeamIndex[0]]) || (gameInfoJS[i].AwayTeamName.toUpperCase() == teamFullNames[currentTeamIndex[0]])) {
                    if (gameInfoJS[i].Completed == "false") {
                        //content += "    <p style=\"float:left; width:100%\" class=\"center-align teal-text\">Game " + gameInfoJS[i].GameNo + "</p>";
                        // if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].HomeTeamName) {
                        content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 disabled " + GetBackgroundColor(gameInfoJS[i].HomeTeamName) + "\">";
                        //}
                        //else {
                        //    content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 teal lighten-5\">";
                        //}
                        content += "        <div class=\"row\">";
                        content += "            <div class=\"col m4 hide-on-small-only center-align\">";
                        content += "                <img src=\"/Content/IPL/Logos/" + gameInfoJS[i].HomeTeamName + ".png\" height=\"50\" >";
                        content += "            </div>";
                        content += "            <div class=\"col s6 right-align blue-grey-text\" style=\"font-weight: bold\" >" + GetShortTeamName(gameInfoJS[i].HomeTeamName) + "</div>";
                        content += "            <div class=\"col s4 m2\" style=\"padding-top:8px\">";
                        content += "                <label>";

                        if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].HomeTeamName) {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Home\" checked=\"checked\" onclick=\"ChangeSelection(id)\" />";
                        }
                        else {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Home\" />";
                        }
                        content += "                    <span></span>";
                        content += "                </label>";
                        content += "            </div>                            ";
                        content += "        </div>";
                        content += "    </a>";

                        content += "    <div style=\"float:left;width:8%;\"><h6 class=\"center-align blue-grey-text\" style=\"padding-top:18px\">VS</h6></div>";

                        //if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].AwayTeamName) {
                        content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 disabled " + GetBackgroundColor(gameInfoJS[i].AwayTeamName) + " \">";
                        //} else {
                        //    content += "    <a style=\"float:left;width:46%; padding-top:10px; padding-bottom:10px; height:75px \" class=\"waves-effect waves-light btn-large z-depth-5 teal lighten-5\">";
                        // }
                        content += "        <div class=\"row\">";
                        content += "            <div class=\"col s4 m2\" style=\"padding-top:8px\">";
                        content += "                <label>";
                        if (gameInfoJS[i].WinnerTeamName == gameInfoJS[i].AwayTeamName) {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Away\" checked=\"checked\" onclick=\"ChangeSelection(id)\" />";
                        }
                        else {
                            content += "                    <input type=\"checkbox\" id = \"game_" + gameInfoJS[i].GameNo + "_Away\" />";
                        }
                        content += "                    <span></span>";
                        content += "                </label>";
                        content += "            </div>";
                        content += "            <div class=\"col s6 left-align blue-grey-text\" style=\"font-weight: bold\" >" + GetShortTeamName(gameInfoJS[i].AwayTeamName) + "</div>";
                        content += "            <div class=\"col m4 hide-on-small-only center-align\">";
                        content += "                <img src=\"/Content/IPL/Logos/" + gameInfoJS[i].AwayTeamName + ".png\" height=\"50\">";
                        content += "            </div>";
                        content += "        </div>";
                        content += "    </a>";

                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0\" class=\"right-align teal-text\" >" + gameInfoJS[i].When + "</p>";
                        content += "    <p style=\"float:left; width:5%; margin: 0; padding: 0\" class=\"right-align white-text\">.</p>";
                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0\" class=\"left-align teal-text\" >" + gameInfoJS[i].Where + "</p>";

                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0\" class=\"right-align teal-text\">" + gameInfoJS[i].HomeScore + "</p>";
                        content += "    <p style=\"float:left; width:5%; margin: 0; padding: 0\" class=\"right-align white-text\">.</p>";
                        content += "    <p style=\"float:left; width:47.5%; margin: 0; padding: 0\" class=\"left-align teal-text\">" + gameInfoJS[i].AwayScore + "</p>";

                        content += "    <hr style=\"float:left; width:100%\" class=\"left\" />";
                    }
                }
            }
        }
        return content;
    }

    function UpdateGamesAndResults() {
        //alert("from update games and results");
        //Update title
        if (viewType[0] == "Date") {
            document.getElementById("TitleSmall").innerHTML = weekShortTitle[currentWeek[0]-1];
            document.getElementById("TitleFull").innerHTML = weekFullTitle[currentWeek[0]-1];
        } else if (viewType[0] == "Team") {
            document.getElementById("TitleSmall").innerHTML = teamShortNames[currentTeamIndex[0]];
            document.getElementById("TitleFull").innerHTML = teamFullNames[currentTeamIndex[0]];
        }
        //Update Games
        document.getElementById("games").innerHTML = GetGamesContent();
        //Update Results
        document.getElementById("results").innerHTML = GetResultsContent();
    }

    function GetLongTeamName(shortTeamName) {
        if (shortTeamName == "KXIP") return "Kings XI Punjab";
        if (shortTeamName == "CSK") return "Chennai Super Kings";
        if (shortTeamName == "KKR") return "Kolkata Knight Riders";
        if (shortTeamName == "SRH") return "Sunrisers Hyderabad";
        if (shortTeamName == "RCB") return "Royal Challengers Bangalore";
        if (shortTeamName == "RR") return "Rajasthan Royals";
        if (shortTeamName == "MI") return "Mumbai Indians";
        if (shortTeamName == "DD") return "Delhi Daredevils";
    }

    function GetShortTeamName(longTeamName) {
        if (longTeamName == "Kings XI Punjab") return "KXIP";
        if (longTeamName == "Chennai Super Kings") return "CSK";
        if (longTeamName == "Kolkata Knight Riders") return "KKR";
        if (longTeamName == "Sunrisers Hyderabad") return "SRH";
        if (longTeamName == "Royal Challengers Bangalore") return "RCB";
        if (longTeamName == "Rajasthan Royals") return "RR";
        if (longTeamName == "Mumbai Indians") return "MI";
        if (longTeamName == "Delhi Daredevils") return "DD";
    }

    function GetStandingsTableBody() {
        var content = "";

        for (i = 0; i < origStandingsJS.length; i++) {
            content += "<tr> <td> <div class=\"clearfix float-my-children\" > ";
            content += "<img src=\"/Content/IPL/Logos/" + origStandingsJS[i].LongTeamName + ".png\" height=\"22\" style=\"padding-left:20px\" >";
            //content += "<div class=\"hide-on-med-and-up\">" + origStandingsJS[i].ShortTeamName + "</div>";
            //content += "<div class=\"hide-on-small-only\">" + origStandingsJS[i].LongTeamName + "</div>";
            content += "<div style=\" padding-left:20px\">" + origStandingsJS[i].ShortTeamName + "</div>";
            content += "</div> </td> <td>" + origStandingsJS[i].P + "</td>";
            content += "<td>" + origStandingsJS[i].W + "</td>";
            content += "<td>" + origStandingsJS[i].L + "</td>";
            content += "<td>" + origStandingsJS[i].Pts + "</td>";
            content += "<td>" + origStandingsJS[i].NRR + "</td>";
            content += "<td>" + origStandingsJS[i].PlayoffPerc + "</td>"; 
            content += "</tr> ";
        }
        return content;
    }

    function GetPredictionsTableBody() {
        var content = "";

        for (i = 0; i < origStandingsJS.length; i++) {

            content += "<tr> <td> <div class=\"clearfix float-my-children\"> ";
            content += "<img src=\"/Content/IPL/Logos/" + predictStandingJS[i].LongTeamName + ".png\" height=\"22\" style=\"padding-left:20px\" > ";
            //content += "<div class=\"hide-on-med-and-up\">" + predictStandingJS[i].ShortTeamName + "</div>";
            //content += "<div class=\"hide-on-small-only-only\">" + predictStandingJS[i].LongTeamName + "</div>";
            content += "<div style=\" padding-left:20px\">" + predictStandingJS[i].ShortTeamName + "</div>";
            content += "</div> </td> <td>" + predictStandingJS[i].P + "</td>";
            content += "<td>" + predictStandingJS[i].W + "</td>";
            content += "<td>" + predictStandingJS[i].L + "</td>";
            content += "<td>" + predictStandingJS[i].PlayoffPerc + "</td>";
            content += "</tr> ";
        }
        return content;
    }

    function SortStandings(standings) {
        standings.sort(function (a, b) {
            if (a.pts != b.pts)
                return b.pts - a.pts;
            else if (a.W != b.W)
                return b.W - a.W;
            else if (a.NRR != b.NRR)
                return b.NRR - a.NRR;
            else {
                if (a.TeamName == b.TeamName) return 0;
                if (a.TeamName > b.TeamName) return 1;
                if (a.TeamName < b.TeamName) return -1;
            }
        });     
    }

    function FindObjectByKey(array, key, value) {
        for (var i = 0; i < array.length; i++) {
            if (array[i][key].localeCompare(value) == 0) {
                return array[i];
            }
        }
        alert("Error: " + value + " not found!");
        return null;
    }
    
</script>



<style type="text/css">
    td {
        padding: 5px;
        margin: 0px;
    }

    th {
        padding: 5px;
        margin: 0px;
    }

    /* tell the container's children to float left: */
    .float-my-children > * {
        float: left;
        margin-right: 5px;
    }

    /* this is called a clearfix. it makes sure that the container's children floats are cleared, without using extra markup */

    .clearfix {
        *zoom: 1 /* for IE */
    }

        .clearfix:before,
        .clearfix:after {
            content: " ";
            display: table;
        }

        .clearfix:after {
            clear: both;
        }

    .card-panel {
        padding: 5px;
    }

    .table {
        margin: 0px;
    }
</style>
