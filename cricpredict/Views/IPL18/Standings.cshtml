
@{
    ViewBag.Title = "Standings";
}


<nav class="teal">
    <div class="container">
        <div class="nav-wrapper">
            <ul class="left">
                <li class="active"><a href='@Url.Action("Standings", "IPL18")'>Standings</a></li>
                <li><a href='@Url.Action("Games", "IPL18")'>Upcoming Games</a></li>
                <li><a href='@Url.Action("Teams", "IPL18")'>Teams</a></li>
            </ul>
        </div>
    </div>
</nav>

@{ 
    string inputStandings = (string)ViewData["Standings"];
    List<string> standings = new List<string>();
    var tokens = inputStandings.Split(',');
    foreach (string token in tokens)
    {
        standings.Add(token);
    }
}


<div class="container">
    <div class="container">
        <h5 style="padding-left:10px">Current Standings</h5>
        <div id="standings"></div>
    </div>
</div>

<script type="text/javascript">
    @{ string standingsAsString = string.Join(",", standings.ToArray()); }
    var standingsJSTemp = '@standingsAsString';
    var standingsJSTokens = standingsJSTemp.split(",");

    var standingsJS = [];
    for (i = 0; i < standingsJSTokens.length; i=i+8)
    {
        standingsJS.push({ "TeamName": standingsJSTokens[i], "P": standingsJSTokens[i + 1], "W": standingsJSTokens[i + 2], "L": standingsJSTokens[i + 3], "T": standingsJSTokens[i + 4], "Pts": standingsJSTokens[i + 5], "NRR": standingsJSTokens[i + 6], "PlayoffPercentage": standingsJSTokens[i + 7] });
    }

    //Sort by % chance of making playoffs


    //Display

    var content = "";
    content += "  <ul class=\"collection\">";

    for (i = 0; i < standingsJS.length; i++)
    {
        content += "    <li class=\"collection-item avatar\">";
        var teamNameWithoutQuotes = standingsJS[i].TeamName.substring(6, standingsJS[i].TeamName.length - 6);

        content += "      <img src=\"/Content/IPL/Logos/" + teamNameWithoutQuotes + ".png\" alt=\"\" class=\"circle\">";
        content += "      <span class=\"title\" style=\"font-weight: bold\" >" + teamNameWithoutQuotes + "</span>";

        content += "      <table class=\"centered\">";
        content += "        <tbody>";
        content += "          <tr>";
        content += "            <td>P</td>";
        content += "            <td>W</td>";
        content += "            <td>L</td>";
        content += "            <td>T</td>";
        content += "            <td>Pts</td>";
        content += "            <td>NRR</td>";
        content += "            <td>Playoff %</td>";
        content += "          </tr>";
        content += "          <tr>";
        content += "            <td>" + standingsJS[i].P + "</td>";
        content += "            <td>" + standingsJS[i].W + "</td>";
        content += "            <td>" + standingsJS[i].L + "</td>";
        content += "            <td>" + standingsJS[i].T + "</td>";
        content += "            <td>" + standingsJS[i].Pts + "</td>";
        content += "            <td>" + standingsJS[i].NRR + "</td>";
        content += "            <td>" + standingsJS[i].PlayoffPercentage + "</td>";
        content += "          </tr>";
        content += "        </tbody>";
        content += "      </table>";

        if (i < 4) 
            content += "<a class=\"secondary-content\"><i class=\"center small material-icons\" style=\"color:#ffab00 \">star</i></a>";        
        else
            content += "<a class=\"secondary-content\"><i class=\"center small material-icons\" style=\"color:#9e9e9e \">star_border</i></a>";

        content += "    </li>";
    }   
    content += "  </ul>";

    document.getElementById("standings").innerHTML = content;
</script>

















